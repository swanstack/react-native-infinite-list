"use strict";(self.webpackChunkreact_native_infinite_list_docs=self.webpackChunkreact_native_infinite_list_docs||[]).push([[914],{6464:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>a,contentTitle:()=>o,default:()=>h,frontMatter:()=>r,metadata:()=>d,toc:()=>c});var i=t(5893),s=t(1151);const r={id:"infinite-section-list",slug:"infinite-section-list",title:"InfiniteSectionList"},o="InfiniteSectionList",d={id:"usage/infinite-section-list",title:"InfiniteSectionList",description:"Props",source:"@site/docs/usage/infinite-section-list.md",sourceDirName:"usage",slug:"/usage/infinite-section-list",permalink:"/react-native-infinite-list/usage/infinite-section-list",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{id:"infinite-section-list",slug:"infinite-section-list",title:"InfiniteSectionList"},sidebar:"docsSidebar",previous:{title:"InfiniteFlatList",permalink:"/react-native-infinite-list/usage/infinite-flat-list"},next:{title:"InfiniteVirtualizedList",permalink:"/react-native-infinite-list/usage/infinite-virtualized-list"}},a={},c=[{value:"Props",id:"props",level:2},{value:"SectionListProps",id:"sectionlistprops",level:3},{value:"<code>loading</code>",id:"loading",level:3},{value:"<code>hasMore</code>",id:"hasmore",level:3},{value:"<code>onLoadMore</code>",id:"onloadmore",level:3},{value:"<code>ensureMinExecutionTime</code>",id:"ensureminexecutiontime",level:3},{value:"<code>ListLoaderComponent</code>",id:"listloadercomponent",level:3},{value:"<code>ListEndMessageComponent</code>",id:"listendmessagecomponent",level:3},{value:"<code>listRef</code>",id:"listref",level:3},{value:"Example",id:"example",level:2}];function l(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,s.a)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h1,{id:"infinitesectionlist",children:"InfiniteSectionList"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-tsx",children:'import {\n  InfiniteSectionList,\n  ListLoader,\n} from "@swanstack/react-native-infinite-list";\n\n<InfiniteSectionList\n  data={data}\n  loading={isFetching}\n  hasMore={hasNextPage}\n  onLoadMore={fetchNextPage}\n  refreshing={isRefetching}\n  onRefresh={handleRefresh}\n  renderItem={({ item }) => <Text>{item.label}</Text>}\n  keyExtractor={(_item, index) => index.toString()}\n  renderSectionHeader={({ section }) => <Text>{section.title}</Text>}\n  ListLoaderComponent={<ListLoader />}\n  ListEmptyComponent={<Text>No data</Text>}\n  ListEndMessageComponent={<Text>Nothing more to load</Text>}\n/>;\n'})}),"\n",(0,i.jsx)(n.h2,{id:"props",children:"Props"}),"\n",(0,i.jsx)(n.h3,{id:"sectionlistprops",children:(0,i.jsx)(n.a,{href:"https://reactnative.dev/docs/sectionlist#props",children:"SectionListProps"})}),"\n",(0,i.jsxs)(n.p,{children:["Inherits ",(0,i.jsx)(n.a,{href:"https://reactnative.dev/docs/sectionlist#props",children:"SectionListProps"})," from ",(0,i.jsx)(n.code,{children:"react-native"}),"."]}),"\n",(0,i.jsx)(n.h3,{id:"loading",children:(0,i.jsx)(n.code,{children:"loading"})}),"\n",(0,i.jsx)(n.p,{children:"Controls whether the component is in a loading state."}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"type"}),(0,i.jsx)(n.th,{children:"default"}),(0,i.jsx)(n.th,{children:"required"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"boolean"}),(0,i.jsx)(n.td,{children:"-"}),(0,i.jsx)(n.td,{children:"YES"})]})})]}),"\n",(0,i.jsx)(n.h3,{id:"hasmore",children:(0,i.jsx)(n.code,{children:"hasMore"})}),"\n",(0,i.jsx)(n.p,{children:"Indicates whether there are more items to be fetched."}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"type"}),(0,i.jsx)(n.th,{children:"default"}),(0,i.jsx)(n.th,{children:"required"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"boolean"}),(0,i.jsx)(n.td,{children:"-"}),(0,i.jsx)(n.td,{children:"YES"})]})})]}),"\n",(0,i.jsx)(n.h3,{id:"onloadmore",children:(0,i.jsx)(n.code,{children:"onLoadMore"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-tsx",children:"() => void;\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Callback function triggered when more items need to be loaded. See more: ",(0,i.jsx)(n.a,{href:"https://reactnative.dev/docs/virtualizedlist#onendreached",children:"onEndReached"}),", ",(0,i.jsx)(n.a,{href:"https://reactnative.dev/docs/virtualizedlist#onendreachedthreshold",children:"onEndReachedThreshold"})]}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"type"}),(0,i.jsx)(n.th,{children:"default"}),(0,i.jsx)(n.th,{children:"required"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"function"}),(0,i.jsx)(n.td,{children:"-"}),(0,i.jsx)(n.td,{children:"YES"})]})})]}),"\n",(0,i.jsx)(n.h3,{id:"ensureminexecutiontime",children:(0,i.jsx)(n.code,{children:"ensureMinExecutionTime"})}),"\n",(0,i.jsxs)(n.p,{children:["Specifies the minimum time, in milliseconds, to wait for the asynchronous ",(0,i.jsx)(n.code,{children:"onLoadMore"})," function to complete. This helps prevent the loader from disappearing too quickly, providing a smoother user experience."]}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"type"}),(0,i.jsx)(n.th,{children:"default"}),(0,i.jsx)(n.th,{children:"required"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"number"}),(0,i.jsx)(n.td,{children:"-"}),(0,i.jsx)(n.td,{children:"NO"})]})})]}),"\n",(0,i.jsx)(n.h3,{id:"listloadercomponent",children:(0,i.jsx)(n.code,{children:"ListLoaderComponent"})}),"\n",(0,i.jsx)(n.p,{children:"Rendered when the data is fetching. Can be a React Component Class, a render function, or a rendered element."}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"type"}),(0,i.jsx)(n.th,{children:"default"}),(0,i.jsx)(n.th,{children:"required"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"component, element"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"ListLoader"})}),(0,i.jsx)(n.td,{children:"NO"})]})})]}),"\n",(0,i.jsx)(n.h3,{id:"listendmessagecomponent",children:(0,i.jsx)(n.code,{children:"ListEndMessageComponent"})}),"\n",(0,i.jsx)(n.p,{children:"Rendered at the bottom of all the items when there are no more items to fetch. Can be a React Component Class, a render function, or a rendered element."}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"type"}),(0,i.jsx)(n.th,{children:"default"}),(0,i.jsx)(n.th,{children:"required"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"component, element"}),(0,i.jsx)(n.td,{children:"-"}),(0,i.jsx)(n.td,{children:"NO"})]})})]}),"\n",(0,i.jsx)(n.h3,{id:"listref",children:(0,i.jsx)(n.code,{children:"listRef"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-tsx",children:'import { type SectionList } from "react-native";\n\ntype ItemInfo { /* your item properties */ }\n\nconst listRef = useRef<SectionList<ItemInfo>>(null);\nlistRef.current?.scrollToOffset({ offset: 0, animated: false });\n\n<InfiniteSectionList listRef={listRef} />;\n'})}),"\n",(0,i.jsx)(n.p,{children:"Ref to the SectionList component."}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"type"}),(0,i.jsx)(n.th,{children:"default"}),(0,i.jsx)(n.th,{children:"required"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"reference"}),(0,i.jsx)(n.td,{children:"undefined"}),(0,i.jsx)(n.td,{children:"NO"})]})})]}),"\n",(0,i.jsx)(n.h2,{id:"example",children:"Example"}),"\n",(0,i.jsxs)(n.p,{children:["Here is a simple usage of the ",(0,i.jsx)(n.strong,{children:"InfiniteSectionList"})," and ",(0,i.jsx)(n.code,{children:"react-query"})]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-tsx",children:'import React, { useCallback, useMemo, useRef } from "react";\nimport {\n  StyleSheet,\n  Text,\n  View,\n  type SectionList,\n  type SectionListRenderItemInfo,\n  type SectionListData,\n} from "react-native";\nimport { useQueryClient, useInfiniteQuery } from "react-query";\nimport {\n  InfiniteSectionList,\n  ListLoader,\n  type InfiniteListRef,\n} from "@swanstack/react-native-infinite-list";\n\n// Define the structure of each item in the list\ninterface ItemInfo {\n  label: string;\n}\n\n// Define the structure of data for each page\ninterface PageInfo {\n  data: ItemInfo[];\n  totalCount: number;\n  nextPage: number | null;\n  prevPage: number | null;\n}\n\n// Function to fetch data for a specific page\nconst fetchPage = async (page: number) => {\n  const response = await fetch(\n    `https://your-api-endpoint.com/api/data?page=${page}&pageLimit=30`\n  );\n  const data = await response.json();\n  return data as PageInfo;\n};\n\nconst ListItem = ({ item }: SectionListRenderItemInfo<ItemInfo>) => (\n  <View style={styles.item}>\n    <Text style={styles.label}>{item.label}</Text>\n  </View>\n);\n\nconst SectionHeader = ({ section }: { section: SectionListData<ItemInfo> }) => (\n  <View style={styles.sectionHeader}>\n    <Text style={styles.sectionHeaderLabel}>{section.title}</Text>\n  </View>\n);\n\nconst keyExtractor = (item: ItemInfo) => item.label;\n\nconst ProjectList = () => {\n  const ref = useRef<InfiniteListRef<SectionListData<ItemInfo>>>(null);\n  const listRef = useRef<SectionList<ItemInfo>>(null);\n\n  const queryClient = useQueryClient();\n\n  const {\n    data,\n    isFetching,\n    hasNextPage,\n    fetchNextPage,\n    isRefetching,\n    refetch,\n  } = useInfiniteQuery({\n    queryKey: ["projects"],\n    queryFn: ({ pageParam = 1 }) => fetchPage(pageParam),\n    getNextPageParam: (lastPage) => lastPage.nextPage,\n    getPreviousPageParam: (firstPage) => firstPage.prevPage,\n  });\n\n  const sections = useMemo(\n    () =>\n      data?.pages.flatMap((page, index) => ({\n        title: `Group ${index + 1}`,\n        data: page.data,\n      })) ?? [],\n    [data?.pages]\n  );\n\n  const handleRefresh = useCallback(async () => {\n    // remove all pages except the first one\n    queryClient.setQueryData(["projects"], {\n      pageParams: [1],\n      pages: data?.pages[0] ? [data.pages[0]] : [],\n    });\n    // refetch pages\n    await refetch();\n  }, [data?.pages[0]]);\n\n  return (\n    <InfiniteSectionList\n      ref={ref}\n      listRef={listRef}\n      sections={sections}\n      loading={isFetching}\n      hasMore={hasNextPage ?? false}\n      onLoadMore={fetchNextPage}\n      refreshing={isRefetching}\n      onRefresh={handleRefresh}\n      keyExtractor={keyExtractor}\n      renderItem={ListItem}\n      renderSectionHeader={SectionHeader}\n      contentContainerStyle={styles.contentContainer}\n      ListLoaderComponent={<ListLoader />}\n      ListEmptyComponent={<Text>No data</Text>}\n      ListEndMessageComponent={<Text>Nothing more to load</Text>}\n    />\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n  },\n  contentContainer: {\n    paddingTop: 16,\n    paddingBottom: 40,\n    paddingHorizontal: 16,\n  },\n  item: {\n    backgroundColor: "rgba(0,0,0,0.1)",\n    padding: 16,\n    height: 50,\n    marginBottom: 10,\n  },\n  label: {\n    fontWeight: "bold",\n    fontSize: 14,\n  },\n  sectionHeader: {\n    marginHorizontal: -16,\n    paddingHorizontal: 16,\n    height: 50,\n    paddingVertical: 16,\n    backgroundColor: "#fff",\n    borderBottomWidth: 1,\n    borderBottomColor: "#ccc",\n    marginBottom: 10,\n  },\n  sectionHeaderLabel: {\n    fontWeight: "bold",\n    fontSize: 16,\n  },\n});\n'})})]})}function h(e={}){const{wrapper:n}={...(0,s.a)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(l,{...e})}):l(e)}},1151:(e,n,t)=>{t.d(n,{Z:()=>d,a:()=>o});var i=t(7294);const s={},r=i.createContext(s);function o(e){const n=i.useContext(r);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),i.createElement(r.Provider,{value:n},e.children)}}}]);